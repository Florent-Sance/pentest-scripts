#!/bin/bash

if test $# -eq 2
then
	IFS=$'\n' read -d '' -r -a wordlist < $2

	for password in ${wordlist[*]}; do 
		result=$(unace t -p$password $1| grep "CRC OK")
		if [ "$result" != "" ]; then
			echo "Password found: $password"
			break
		fi
		echo "Password not found."
	done
else
	echo "acecrack.sh - v0.2"
	echo "Dictionary attack against WinAce archives"
	echo "The script needs unace (unace-nonfree on debian or http://www.winace.com/files/linunace25.tgz"
	echo " "
	echo "Usage: "
	echo "acecrack.sh archive.ace wordlist.txt"
fi
